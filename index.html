<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ§Ø´ÙŠØ± Ù…Ø·Ø¹Ù… Ù„ÙŠØ§Ù„ÙŠ Ø§Ù„ÙØ±Ø§Øª</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Changa:wght@600&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Changa', sans-serif;
    background: #0a2a66;
    color: white;
    text-align: center;
}

.screen { display: none; padding: 20px; }
.active { display: block; }

h1 { font-size: 38px; }

button {
    font-size: 24px;
    padding: 16px;
    margin: 10px;
    border-radius: 18px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    width: 100%;
}

.rainbow {
    background: linear-gradient(270deg, #00c853, #aeea00, #00c853);
    background-size: 400% 400%;
    animation: rainbow 3s ease infinite;
}

.big-btn {
    width: 95%;
    font-size: 28px;
    padding: 22px;
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 15px;
}

input {
    width: 95%;
    padding: 14px;
    font-size: 22px;
    margin: 10px auto;
    border-radius: 12px;
    border: none;
}

table {
    width: 100%;
    border-collapse: collapse;
    font-size: 20px;
}

td, th {
    border: 1px solid white;
    padding: 8px;
}

@media print {
    body { background: white; color: black; }
    button { display: none; }
}
</style>
</head>

<body>

<!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="home" class="screen active">
    <h1>ÙƒØ§Ø´ÙŠØ± Ù…Ø·Ø¹Ù… Ù„ÙŠØ§Ù„ÙŠ Ø§Ù„ÙØ±Ø§Øª</h1>
    <button class="rainbow big-btn" onclick="goMenu()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    <button class="rainbow big-btn" onclick="openAdmin()">Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
</div>

<!-- Ø§Ù„Ø£ØµÙ†Ø§Ù -->
<div id="menu" class="screen">
    <h1>Ø§Ø®ØªØ± Ø§Ù„Ø·Ù„Ø¨</h1>
    <div class="grid" id="items"></div>
    <button class="rainbow big-btn" onclick="goCheckout()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- Ø§Ù„ÙØ§ØªÙˆØ±Ø© -->
<div id="checkout" class="screen">
    <h1 id="orderNumber"></h1>

    <table>
        <thead>
            <tr>
                <th>Ø§Ù„ØµÙ†Ù</th>
                <th>Ø§Ù„Ø¹Ø¯Ø¯</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
            </tr>
        </thead>
        <tbody id="orderDetails"></tbody>
    </table>

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <input id="customerAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø²Ø¨ÙˆÙ†">

    <h2 id="totalPrice"></h2>

    <button class="rainbow big-btn" onclick="printOrder()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
    <button class="rainbow big-btn" onclick="goHome()">Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
<div id="admin" class="screen">
    <h1>Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h1>

    <table>
        <thead>
            <tr>
                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                <th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th>
                <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
                <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
            </tr>
        </thead>
        <tbody id="adminTable"></tbody>
    </table>

    <h2 id="grandTotal"></h2>

    <button class="rainbow big-btn" onclick="clearHistory()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
    <button class="rainbow big-btn" onclick="goHome()">Ø±Ø¬ÙˆØ¹</button>
</div>

<script>
const prices = {
    "Ø³Ù…Ùƒ Ù…Ø³ÙƒÙˆÙ": 15000,
    "ØµÙŠÙ†ÙŠÙ‡ Ù…Ù†Ø¯ÙŠ Ù„Ø­Ù…": 16000,
    "Ù†ÙØ± Ù…Ù†Ø¯ÙŠ Ù„Ø­Ù…": 8000,
    "Ø¯Ø¬Ø§Ø¬Ù‡ Ù…Ù†Ø¯ÙŠ": 20000,
    "ØµÙŠÙ†ÙŠÙ‡ Ù…Ù†Ø¯ÙŠ Ø¯Ø¬Ø§Ø¬": 10000,
    "Ù†ÙØ± Ù…Ù†Ø¯ÙŠ Ø¯Ø¬Ø§Ø¬": 5000,
    "ÙƒÙŠÙ„Ùˆ ÙƒØ¨Ø§Ø¨": 18000,
    "Ù†Øµ ÙƒÙŠÙ„Ùˆ ÙƒØ¨Ø§Ø¨": 9000,
    "Ù†ÙØ± ÙƒØ¨Ø§Ø¨": 5000,
    "Ù†Øµ Ù†ÙØ± ÙƒØ¨Ø§Ø¨": 3500,
    "Ù…Ø¹Ù„Ø§Ùƒ Ù†ÙØ±": 5000,
    "Ù…Ø¹Ù„Ø§Ùƒ Ù†Øµ Ù†ÙØ±": 3500
};

let order = {};
let history = JSON.parse(localStorage.getItem("orders")) || [];
let orderCounter = parseInt(localStorage.getItem("orderCounter")) || 1;

const itemsDiv = document.getElementById("items");

Object.keys(prices).forEach(item => {
    const btn = document.createElement("button");
    btn.className = "rainbow";
    btn.innerText = item;
    btn.onclick = () => {
        order[item] = (order[item] || 0) + 1;
        renderOrder();
    };
    itemsDiv.appendChild(btn);
});

function show(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

function goMenu() { show("menu"); }
function goHome() { show("home"); }

function renderOrder() {
    let html = "";
    let total = 0;

    for (let item in order) {
        let qty = order[item];
        let price = prices[item] * qty;
        total += price;
        html += `<tr><td>${item}</td><td>${qty}</td><td>${price}</td></tr>`;
    }

    document.getElementById("orderDetails").innerHTML =
        html || "<tr><td colspan='3'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨</td></tr>";

    document.getElementById("totalPrice").innerText =
        "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: " + total + " Ø¯.Ø¹";

    document.getElementById("orderNumber").innerText =
        "Ø·Ù„Ø¨ Ø±Ù‚Ù… " + orderCounter;
}

function goCheckout() {
    renderOrder();
    show("checkout");
}

function printOrder() {
    if (Object.keys(order).length === 0) {
        alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨");
        return;
    }

    const address = document.getElementById("customerAddress").value || "â€”";

    const total = Object.keys(order)
        .reduce((s, i) => s + prices[i] * order[i], 0);

    history.push({
        orderNumber: orderCounter,
        date: new Date().toLocaleString("ar-IQ"),
        items: { ...order },
        address: address,
        total: total
    });

    localStorage.setItem("orders", JSON.stringify(history));

    orderCounter++;
    localStorage.setItem("orderCounter", orderCounter);

    window.print();
    order = {};
    document.getElementById("customerAddress").value = "";
}

function openAdmin() {
    if (prompt("Ø§Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²") !== "098123") {
        alert("Ø±Ù…Ø² Ø®Ø·Ø£");
        return;
    }
    renderAdmin();
    show("admin");
}

function renderAdmin() {
    let rows = "";
    let all = 0;

    history.forEach(o => {
        let details = "";
        for (let i in o.items) {
            details += `${i} Ã— ${o.items[i]}<br>`;
        }
        all += o.total;
        rows += `
        <tr>
            <td>Ø·Ù„Ø¨ ${o.orderNumber}<br>${o.date}</td>
            <td>${details}</td>
            <td>${o.address}</td>
            <td>${o.total}</td>
        </tr>`;
    });

    document.getElementById("adminTable").innerHTML =
        rows || "<tr><td colspan='4'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</td></tr>";

    document.getElementById("grandTotal").innerText =
        "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: " + all + " Ø¯.Ø¹";
}

function clearHistory() {
    if (!confirm("Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ")) return;
    history = [];
    localStorage.removeItem("orders");
    localStorage.removeItem("orderCounter");
    orderCounter = 1;
    renderAdmin();
}
</script>

</body>
</html>